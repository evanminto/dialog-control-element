(()=>{class t extends HTMLElement{#t=null;#e="toggle";#i=!1;#s=!1;static observedAttributes=["target","target-action","light-dismiss","view-transitions"];attributeChangedCallback(t,e,i){"target"===t&&(this.#t=i||null),"target-action"===t&&i&&["toggle","show","hide"].includes(i)&&(this.#e=i),"light-dismiss"===t&&(this.#i=void 0!==i),"view-transitions"===t&&(this.#s=void 0!==i)}get target(){return this.#t}set target(t){this.#t=t,null===t?this.removeAttribute("target"):this.setAttribute("target",t)}get targetAction(){return this.#e}set targetAction(t){t&&(this.#e=t,null===t?this.removeAttribute("target-action"):this.setAttribute("target-action",t))}get lightDismiss(){return this.#i}set lightDismiss(t){this.#i=!!t,this.#i?this.setAttribute("light-dismiss",""):this.removeAttribute("light-dismiss")}get viewTransitions(){return this.#s}set viewTransitions(t){this.#s=!!t,this.#s?this.setAttribute("view-transitions",""):this.removeAttribute("view-transitions")}get targetElement(){let t=this.getRootNode(),e=this.target?t.getElementById(this.target):null;return e instanceof HTMLDialogElement?e:null}connectedCallback(){this.addEventListener("click",this.#n)}disconnectedCallback(){this.removeEventListener("click",this.#n)}#o(){return this.dispatchEvent(new Event("modal-control-before-toggle",{cancelable:!0}))}#r(){return this.dispatchEvent(new Event("modal-control-toggle"))}#n=t=>{let e=t.target;if(!e.closest('button, input[type="button"]'))return;let{targetElement:i}=this;if(i)switch(this.targetAction){case"show":!i.open&&this.#o()&&this.#l(i);break;case"hide":i.open&&this.#o()&&this.#a(i);break;case"toggle":this.#o()&&(i.open?this.#a(i):this.#l(i))}};#h=t=>{let{targetElement:e}=this;e&&!function(t,e){let{clientX:i,clientY:s}=t,n=t.target,{x:o,y:r,width:l,height:a}=e.getBoundingClientRect();return e.contains(n)||i>=o&&i<=o+l&&s>=r&&s<=r+a}(t,e)&&this.#o()&&this.#a(e)};#g=t=>{let{targetElement:e}=this;e&&!e.contains(t.target)&&this.#o()&&this.#a(e)};#c=t=>{t.target.removeEventListener("click",this.#h),t.target.getRootNode().removeEventListener("click",this.#g),t.target.removeEventListener("close",this.#c)};#a(t){this.#d(()=>{console.log("close"),t.close(),this.#r()})}#l(t){this.#d(()=>{t.showModal(),this.lightDismiss&&this.#u(t),this.#r()})}#d(t){return this.viewTransitions&&"startViewTransition"in document?document.startViewTransition(t):t()}#u(t){t&&(t.addEventListener("click",this.#h),setTimeout(()=>{t.getRootNode().addEventListener("click",this.#g),t.addEventListener("close",this.#c)},0))}}((e="modal-control")=>{"customElements"in window&&customElements.define(e,t)})()})();
//# sourceMappingURL=global.js.map
